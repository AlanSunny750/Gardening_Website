<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Drag and Drop Flower-Pot Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: rgb(228, 228, 228);
        }

        canvas {
            border: 1px solid black;
            background: url('25591768_eq5g_3dcy_211126.jpg') no-repeat center center;
            background-size: cover;
        }

        a {
            position: absolute;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: rgb(18, 17, 17);
            font-size: 24px;
            cursor: pointer;
            border: 1px solid transparent;
            padding: 5px;
            border-radius: 5px;
        }

        a:hover {
            border: 1px solid gray;
        }
    </style>
</head>

<body>
    
    <canvas id="gameCanvas" width="1000" height="600"></canvas>

    <a href="/"> Home </a>

</body>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        const flowerImagesSrc = ['flower1.png', 'flower2.png', 'flower3.png'];
        const flowerImages = flowerImagesSrc.map(src => {
            const img = new Image();
            img.src = src;
            return img;
        });

        const potImage = new Image();
        potImage.src = "pot.png";

        const sidebarFlowers = [
            { x: 10, y: 10, width: 50, height: 50, img: flowerImages[0] },
            { x: 10, y: 80, width: 50, height: 50, img: flowerImages[1] },
            { x: 10, y: 150, width: 50, height: 50, img: flowerImages[2] }
        ];

        const metadata = [
            { name: 'Rose', description: 'A red flower.', y: 70 },
            { name: 'Tulip', description: 'Colorful and elegant.', y: 140 },
            { name: 'Daisy', description: 'A symbol of purity.', y: 210 }
        ];

        const pots = [
            { x: 500, y: 450, width: 80, height: 80, filled: false },
            { x: 640, y: 450, width: 80, height: 80, filled: false },
            { x: 780, y: 450, width: 80, height: 80, filled: false }
        ];

        const flowersInPots = [];

        let draggedFlower = null;

        function drawSidebar() {
            ctx.fillStyle = "#e0e0e0";
            ctx.fillRect(0, 0, 190, canvas.height);
            sidebarFlowers.forEach((flower, index) => {
                ctx.drawImage(flower.img, flower.x, flower.y, flower.width, flower.height);
                ctx.fillStyle = "black";
                ctx.font = "bold 14px Arial";
                ctx.fillText(metadata[index].name, 70, metadata[index].y);
                ctx.font = "12px Arial";
                ctx.fillText(metadata[index].description, 70, metadata[index].y + 20);
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pots.forEach(pot => {
                ctx.drawImage(potImage, pot.x, pot.y, pot.width, pot.height);
            });

            flowersInPots.forEach(flower => {
                ctx.drawImage(flower.img, flower.x, flower.y, flower.width, flower.height);
            });

            drawSidebar();

            if (draggedFlower) {
                ctx.drawImage(draggedFlower.img, draggedFlower.x, draggedFlower.y, draggedFlower.width, draggedFlower.height);
            }

            requestAnimationFrame(draw);
        }

        canvas.addEventListener("mousedown", function(event) {
            const mouseX = event.clientX - canvas.getBoundingClientRect().left;
            const mouseY = event.clientY - canvas.getBoundingClientRect().top;

            sidebarFlowers.forEach((flower) => {
                if (mouseX >= flower.x && mouseX <= flower.x + flower.width && mouseY >= flower.y && mouseY <= flower.y + flower.height) {
                    draggedFlower = { ...flower };
                }
            });
        });

        canvas.addEventListener("mousemove", function(event) {
            if (draggedFlower) {
                const mouseX = event.clientX - canvas.getBoundingClientRect().left;
                const mouseY = event.clientY - canvas.getBoundingClientRect().top;
                draggedFlower.x = mouseX - draggedFlower.width / 2;
                draggedFlower.y = mouseY - draggedFlower.height / 2;
            }
        });

        canvas.addEventListener("mouseup", function() {
            if (draggedFlower) {
                pots.forEach(pot => {
                    if (draggedFlower.x + draggedFlower.width / 2 >= pot.x && draggedFlower.x + draggedFlower.width / 2 <= pot.x + pot.width && draggedFlower.y + draggedFlower.height / 2 >= pot.y && draggedFlower.y + draggedFlower.height / 2 <= pot.y + pot.height && !pot.filled) {
                        pot.filled = true;
                        flowersInPots.push({
                            ...draggedFlower,
                            x: pot.x + (pot.width - draggedFlower.width) / 2,
                            y: pot.y + pot.height - draggedFlower.height * 2.2
                        });
                        draggedFlower = null;
                    }
                });

                draggedFlower = null;
            }
        });

        draw();
    </script>

</html>
